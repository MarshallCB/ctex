export default function(t){let{init:e,...s}=t,[i,o,r]=function(t){let e=[[],[],[]];do{Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t).map(t=>t.toString())).forEach(s=>{let i=t[s];e["function"!=typeof i||e[0].includes(0)?i.isContext&&!e[2].includes(s)?2:1:0].push(s)})}while((t=Object.getPrototypeOf(t))&&Object.getPrototypeOf(t));return e}(s);function n(t){if(this instanceof n==!1)return new n(t);this.init=e||(()=>{}),this.observers={},this.isContext=!0,i.forEach(t=>{Object.defineProperty(this,t,{set(e){s[t](e)},get:()=>s[t],enumerable:!1})}),o.forEach(e=>{this.observers[e]=[],Object.defineProperty(this,e,{set(t){this["_$"+e]=t,this.observers[e].forEach(e=>e(t))},get(){return this["_$"+e]},enumerable:!0}),this[e]=t[e]||s[e]}),r.forEach(e=>{this[e]=s[e],this[e].set(t[e]||{})}),this.init()}return n.prototype.observe=function(t,e){this.observers[t].push(e)},n.prototype.set=function(t){for(let[e,s]of Object.entries(t))this[e].isContext?this[e].set(s):this[e]=s},n.prototype.values=function(){let t={};return o.forEach(e=>t[e]=this[e]),r.forEach(e=>t[e]=this[e].values()),t},n}
