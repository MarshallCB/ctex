export default function(t){let{init:e,...r}=t,[o,s,i]=function(t){let e=[[],[],[]];do{Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t).map(t=>t.toString())).forEach(r=>{let o=t[r];e["function"!=typeof o||e[0].includes(0)?o.isContext&&!e[2].includes(r)?2:1:0].push(r)})}while((t=Object.getPrototypeOf(t))&&Object.getPrototypeOf(t));return e}(r);function n(t){if(this instanceof n==!1)return new n(t);this.init=e||(()=>{}),this.observers={},this.isContext=!0,o.forEach(t=>{Object.defineProperty(this,t,{set(e){r[t](e)},get:()=>r[t],enumerable:!1})}),s.forEach(e=>{this.observers[e]=[],Object.defineProperty(this,e,{set(t){this["_$"+e]=t,this.observers[e].forEach(e=>e(t))},get(){return this["_$"+e]},enumerable:!0}),this[e]=t[e]||r[e]}),i.forEach(e=>{this[e]=r[e],this[e].set(t[e]||{})}),this.init()}return n.prototype.observe=function(t,e){this.observers[t].push(e)},n.prototype.set=function(t){for(let[e,r]of Object.entries(t))this[e]=r},n.prototype.values=function(){let t={};return s.forEach(e=>t[e]=this[e]),i.forEach(e=>t[e]=this[e].values()),t},n}
