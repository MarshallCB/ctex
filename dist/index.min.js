!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).ctex=e()}(this,(function(){"use strict";return function(t){let{init:e,...o}=t,[i,s,n]=function(t){let e=[[],[],[]];do{Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t).map(t=>t.toString())).forEach(o=>{let i=t[o];e["function"!=typeof i||e[0].includes(0)?i.isContext&&!e[2].includes(o)?2:1:0].push(o)})}while((t=Object.getPrototypeOf(t))&&Object.getPrototypeOf(t));return e}(o);function r(t){if(this instanceof r==!1)return new r(t);this.init=e||(()=>{}),this.observers={},this.isContext=!0,i.forEach(t=>{Object.defineProperty(this,t,{set(e){o[t](e)},get:()=>o[t],enumerable:!1})}),s.forEach(e=>{this.observers[e]=[],Object.defineProperty(this,e,{set(t){this["_$"+e]=t,this.observers[e].forEach(e=>e(t))},get(){return this["_$"+e]},enumerable:!0}),this[e]=t[e]||o[e]}),n.forEach(e=>{this[e]=o[e],this[e].set(t[e]||{})}),this.init()}return r.prototype.observe=function(t,e){this.observers[t].push(e)},r.prototype.set=function(t){for(let[e,o]of Object.entries(t))this[e].isContext?this[e].set(o):this[e]=o},r.prototype.values=function(){let t={};return s.forEach(e=>t[e]=this[e]),n.forEach(e=>t[e]=this[e].values()),t},r}}));
